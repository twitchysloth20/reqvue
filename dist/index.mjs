import{createFetch as m}from"@vueuse/core";function d({url:e,path_params:t}){if(!t)return e;if(Object.keys(t).length<1)throw new Error("Path parameters object is empty at replaceEndpointPlaceholders.");for(let o in t){let n=`{${o}}`;if(e.includes(n))e=e.replace(n,encodeURIComponent(String(t[o])));else throw new Error(`Placeholder ${n} not found in URL at replaceEndpointPlaceholders.`)}return e.replace(/\{(.*?)\}/g,"").replace("//","/")}function f({url:e,query_params:t}){if(!t)return e;if(Object.keys(t).length<1)throw new Error("Query parameters object is empty at addQueryParams.");let o="?";for(let n in t)o!=="?"&&(o+="&"),o+=`${encodeURIComponent(n)}=${encodeURIComponent(String(t[n]))}`;return(e+o).replace(/\{(.*?)\}/g,"").replace("//","/")}var s={};function P(e){s=e}function q(){return{}}function F(e,t={}){let o=e.base_url||s.base_url;if(!o)throw new Error("Base URL is not defined. Please set it in the global config or request config.");let n=typeof e.path=="string"?e.path:f({url:d(e.path),query_params:e.path.query_params}),c=typeof e.path!="string"?e.path.body:void 0;t={...t,body:c?JSON.stringify(c):void 0};let p=e.beforeFetch,u=e.afterFetch,h=e.onFetchError,l=e.timeout||s.timeout||3e4;return m({baseUrl:o,options:{async beforeFetch(r){let{options:a}=r,i=e.auth_token||s.auth_token;if(i&&(a.headers={...a.headers,Authorization:`Bearer ${i}`}),p){let y=await p(r);return{options:{...a,...y}}}return{options:a}},async afterFetch(r){return u?await u(r):r},async onFetchError(r){return h?await h(r):r},timeout:l},fetchOptions:{headers:(()=>{let r={...e.headers||s.headers||{}};return!Object.keys(r).some(i=>i.toLowerCase()==="content-type")&&c&&(r["Content-Type"]="application/json"),r})()}})(n,t)}export{q as defineEndpoint,F as reqvue,P as setApiConfig};
